

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>函数一览 &mdash; 智能数据采集仪脚本说明  文档</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="智能数据采集仪脚本说明  文档" href="../index.html"/>
        <link rel="up" title="脚本指导手册" href="index.html"/>
        <link rel="next" title="工程示例" href="scripts.html"/>
        <link rel="prev" title="系统一览" href="introduction.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> 智能数据采集仪脚本说明
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">内容:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rst_test.html">abc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/index.html">硬件使用手册</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">脚本指导手册</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">系统一览</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">函数一览</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">数字总线采集</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rs422-send"><em>rs422_send</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#modbus-send"><em>modbus_send</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rs232-send"><em>rs232_send</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdi12-1-send"><em>sdi12_1_send</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdi12-2-send"><em>sdi12_2_send</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">模拟信号采集</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vol-single-get"><em>vol_single_get</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vol-diff-get"><em>vol_diff_get</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#current-get"><em>current_get</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pt100-3wire-get"><em>pt100_3wire_get</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pt100-4wire-get"><em>pt100_4wire_get</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">数字电平</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#input-get"><em>input_get</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-set"><em>output_set</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id8">脉冲计数与频率测量</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pwm-start"><em>pwm_start</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pwm-stop"><em>pwm_stop</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pwm-status"><em>pwm_status</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pwm-set"><em>pwm_set</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pwm-get"><em>pwm_get</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pulse1-count-start"><em>pulse1_count_start</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pulse2-count-start"><em>pulse2_count_start</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">缓存</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#set-global-number"><em>set_global_number</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-global-number"><em>get_global_number</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-global-buffer"><em>set_global_buffer</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-global-buffer"><em>get_global_buffer</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id10">延时</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#delay-call"><em>delay_call</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">时间</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#datetime"><em>datetime</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#timestamp"><em>timestamp</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#bcdtime"><em>bcdtime</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id13">系统</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#relay"><em>relay</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pt-temperature"><em>pt_temperature</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sys-power-vol"><em>sys_power_vol</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id14">回调函数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15"><em>总线型回调函数说明</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16"><em>delay_call回调函数说明</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pwm-callback"><em>pwm_callback回调函数说明</em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">工程示例</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../host/index.html">上位机使用手册</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">智能数据采集仪脚本说明</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">脚本指导手册</a> &raquo;</li>
      
    <li>函数一览</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/software/functions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>函数一览<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>智能数据采集仪提供的函数分为以下几个类别：</p>
<ul class="simple">
<li><a class="reference internal" href="#id2">数字总线采集</a></li>
<li><a class="reference internal" href="#id4">模拟信号采集</a></li>
<li><a class="reference internal" href="#id7">数字电平</a></li>
<li><a class="reference internal" href="#id9">缓存</a></li>
<li><a class="reference internal" href="#id10">延时</a></li>
<li><a class="reference internal" href="#id11">数据</a></li>
<li><a class="reference internal" href="#id12">时间</a></li>
<li><a class="reference internal" href="#id13">系统</a></li>
</ul>
<div class="section" id="id2">
<h2>数字总线采集<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>智能数据采集仪支持多种数字总线数据采集，分别为：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">总线</th>
<th class="head">函数</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>rs422/rs485</td>
<td>rs422_send</td>
</tr>
<tr class="row-odd"><td>modbus(基于rs422)</td>
<td>modbus_send</td>
</tr>
<tr class="row-even"><td>rs232</td>
<td>rs232_send</td>
</tr>
<tr class="row-odd"><td>sdi12</td>
<td>sdi12_1_send,sdi12_2_send</td>
</tr>
</tbody>
</table>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="rs422-send">
<h3><em>rs422_send</em><a class="headerlink" href="#rs422-send" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>通过rs422端子发送数据</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">rs422_send (table_value,parameter,timeout,callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>table_value</td>
<td>要发送的数据。比如{1,2,3}</td>
</tr>
<tr class="row-odd"><td>parameter</td>
<td>串口参数。格式：‘&#8221;115200_8N1&#8221;</td>
</tr>
<tr class="row-even"><td>timeout</td>
<td>等待超时时间。单位：秒</td>
</tr>
<tr class="row-odd"><td>callback</td>
<td>等待超时后，返回数据的回调函数。详细信息参考callback节。</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="modbus-send">
<h3><em>modbus_send</em><a class="headerlink" href="#modbus-send" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>使用基于RS422的Modbus协议进行通信</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">modbus_send (table_value,parameter,timeout,callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>table_value</td>
<td>要发送的数据。比如读取地址为0x01设备的保持寄存器0开始的3个值。{0x01,0x00,0x04,0x00,0x03}。数据中不包含crc</td>
</tr>
<tr class="row-odd"><td>parameter</td>
<td>串口参数。格式：‘&#8221;115200_8N1&#8221;</td>
</tr>
<tr class="row-even"><td>timeout</td>
<td>等待超时时间。单位：秒</td>
</tr>
<tr class="row-odd"><td>callback</td>
<td>等待超时后，返回数据的回调函数。详细信息参考callback节。</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">Modbus协议请参考 <a class="reference external" href="http://www.modbus.org/docs/Modbus_Application_Protocol_V1_1b3.pdf">MODBUS APPLICATION PROTOCOL SPECIFICATION V1.1b3</a></p>
</div>
</div>
<div class="section" id="rs232-send">
<h3><em>rs232_send</em><a class="headerlink" href="#rs232-send" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>通过rs232端子发送数据</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">rs232_send (table_value,parameter,timeout,callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>table_value</td>
<td>要发送的数据。比如{1,2,3}</td>
</tr>
<tr class="row-odd"><td>parameter</td>
<td>串口参数。格式：‘&#8221;115200_8N1&#8221;</td>
</tr>
<tr class="row-even"><td>timeout</td>
<td>等待超时时间。单位：秒</td>
</tr>
<tr class="row-odd"><td>callback</td>
<td>等待超时后，返回数据的回调函数。详细信息参考callback节。</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="sdi12-1-send">
<h3><em>sdi12_1_send</em><a class="headerlink" href="#sdi12-1-send" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>使用SDI12通道1进行采集</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">sdi12_1_send (table_value,timeout,callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>table_value</td>
<td>要发送的数据。比如{0x30,0x43,0x21}, 0C!</td>
</tr>
<tr class="row-odd"><td>timeout</td>
<td>等待超时时间。单位：秒</td>
</tr>
<tr class="row-even"><td>callback</td>
<td>等待超时后，返回数据的回调函数。详细信息参考callback节。</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">SDI12协议请参考 <a class="reference external" href="http://www.sdi-12.org/archives/SDI-12_version1_3%20January%2028,%202016.pdf">SDI-12 Specification 1.3 January 28 2016</a></p>
</div>
</div>
<div class="section" id="sdi12-2-send">
<h3><em>sdi12_2_send</em><a class="headerlink" href="#sdi12-2-send" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>使用SDI12通道2进行采集</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">sdi12_2_send (table_value,timeout,callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>table_value</td>
<td>要发送的数据。比如{0x30,0x43,0x21}, 0C!</td>
</tr>
<tr class="row-odd"><td>timeout</td>
<td>等待超时时间。单位：秒</td>
</tr>
<tr class="row-even"><td>callback</td>
<td>等待超时后，返回数据的回调函数。详细信息参考callback节。</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">SDI12协议请参考 <a class="reference external" href="http://www.sdi-12.org/archives/SDI-12_version1_3%20January%2028,%202016.pdf">SDI-12 Specification 1.3 January 28 2016</a></p>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>模拟信号采集<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<blockquote>
<div><p>模拟信号采集支持电压，电流和 PT100铂电阻测量。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>类型</td>
<td>范围</td>
</tr>
<tr class="row-even"><td>电压</td>
<td>0 ~ 4.096V</td>
</tr>
<tr class="row-odd"><td>电流</td>
<td>4 ~ 20mA</td>
</tr>
<tr class="row-even"><td>电阻</td>
<td>PT100</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="vol-single-get">
<h3><em>vol_single_get</em><a class="headerlink" href="#vol-single-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取单端电压测量结果</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">vol_single_get (ad_channel)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ad_channel</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>对应AD端子通道的电压值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="vol-diff-get">
<h3><em>vol_diff_get</em><a class="headerlink" href="#vol-diff-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取双端差分电压测量结果</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">vol_diff_get (ad_channel1 , ad_channel2)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ad_channel1</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-odd"><td>ad_channel2</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>对应AD端子通道（ad_channel1- ad_channel2）的电压值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="current-get">
<h3><em>current_get</em><a class="headerlink" href="#current-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取电流测量结果</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">current_get (ad_channel)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ad_channel</td>
<td>AD端子通道号。范围：&#8217;AD2&#8217;,&#8217;AD3&#8217;。只有AD2，AD3通道具备电流测量功能</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>对应AD端子通道的电流测量结果</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pt100-3wire-get">
<h3><em>pt100_3wire_get</em><a class="headerlink" href="#pt100-3wire-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取3线式PT100热电阻的阻值。获得阻值后，可以通过 <code class="docutils literal"><span class="pre">pt_temperature()</span></code> 函数计算出温度值</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pt100_3wire_get(ad_channel1,ad_channel2,ad_channel3)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ad_channel1</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-odd"><td>ad_channel2</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-even"><td>ad_channel3</td>
<td>AD端子通道号。范围：‘&#8217;AD2&#8217;,&#8217;AD3&#8217;</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>PT100热电阻的阻值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">PT100 3线热电阻测温硬件连接方法，请参考 硬件使用手册。 相关原理请参考 <a class="reference external" href="http://www.360doc.com/content/12/0829/16/2607680_233017457.shtml">热电阻测温原理及接线方式介绍</a>
蓝色线连接通道对应脚本函数 <code class="docutils literal"><span class="pre">pt100_3wire_get</span></code> 第一个参数。红色线之一必须连接于 <code class="docutils literal"><span class="pre">AD2</span></code> 或 <code class="docutils literal"><span class="pre">AD3</span></code> 端子，并且 <code class="docutils literal"><span class="pre">pt100_3wire_get</span></code> 第三个参数必须为 <code class="docutils literal"><span class="pre">AD2</span></code> 或 <code class="docutils literal"><span class="pre">AD3</span></code></p>
</div>
</div>
<div class="section" id="pt100-4wire-get">
<h3><em>pt100_4wire_get</em><a class="headerlink" href="#pt100-4wire-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取4线式PT100热电阻的阻值。获得阻值后，可以通过 <code class="docutils literal"><span class="pre">pt_temperature()</span></code> 函数计算出温度值</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pt100_4wire_get(ad_channel1,ad_channel2,ad_channel3,ad_channel4)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ad_channel1</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-odd"><td>ad_channel2</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-even"><td>ad_channel3</td>
<td>AD端子通道号。范围：‘&#8217;AD0&#8217;,&#8217;AD1&#8217;,&#8217;AD2&#8217;,&#8217;AD3&#8217;,&#8217;AD4&#8217;,&#8217;AD5&#8217;</td>
</tr>
<tr class="row-odd"><td>ad_channel4</td>
<td>AD端子通道号。范围：‘&#8217;AD2&#8217;,&#8217;AD3&#8217;</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>PT100热电阻的阻值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">PT100 4线热电阻测温硬件连接方法，请参考 硬件使用手册。 相关原理请参考 <a class="reference external" href="http://www.360doc.com/content/12/0829/16/2607680_233017457.shtml">热电阻测温原理及接线方式介绍</a>
蓝色端子对应 <code class="docutils literal"><span class="pre">pt100_4wire_get</span></code> 的第1和第2参数，红色端子对应与第3和第4参数。 并且，第4参数通道必须为 <code class="docutils literal"><span class="pre">AD2</span></code> 或 <code class="docutils literal"><span class="pre">AD3</span></code> 之一。</p>
</div>
</div>
</div>
<div class="section" id="id7">
<h2>数字电平<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
<div class="section" id="input-get">
<h3><em>input_get</em><a class="headerlink" href="#input-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>通过IO端子通道，获取输入高低电平</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">input_get (io_channel)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>io_channel</td>
<td>IO端子通道。范围：&#8217;SDI12_1&#8217;,&#8217;SDI12_2&#8217;,&#8217;PWM_1&#8217;,&#8217;PWM_2&#8217;</td>
</tr>
<tr class="row-odd"><td>返回值io_value</td>
<td>1/0。对应高电平/低电平 。如果io_channel无效，或者该引脚已经被其他功能复用，则返回-1。</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">一旦“IO端子通道”被选择为测量功能，则该函数功能失效。</p>
</div>
</div>
<div class="section" id="output-set">
<h3><em>output_set</em><a class="headerlink" href="#output-set" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>通过IO端子通道，输出高低电平</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">output_set (io_channel,io_value)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>io_channel</td>
<td>IO端子通道。范围：&#8217;SDI12_1&#8217;,&#8217;SDI12_2&#8217;,&#8217;PWM_1&#8217;,&#8217;PWM_2&#8217;</td>
</tr>
<tr class="row-odd"><td>io_value</td>
<td>1/0。对应输出高电平/低电平。5v/0v。</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">一旦“IO端子通道”被选择为测量功能，则该函数功能失效。</p>
</div>
</div>
</div>
<div class="section" id="id8">
<h2>脉冲计数与频率测量<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h2>
<div class="section" id="pwm-start">
<h3><em>pwm_start</em><a class="headerlink" href="#pwm-start" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>开始脉冲计数。 上升沿计数。</p>
<p>脉冲计数用于长时间统计脉冲个数。比如 翻斗式雨量筒每达到一定降雨量就会产生一个脉冲，通过脉冲计数功能可以统计出每小时，每天的降雨量。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pwm_start (pwm_channel, count)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pwm_channel</td>
<td><p class="first">脉冲计数端子通道。范围：</p>
<blockquote class="last">
<div><ul class="simple">
<li>&#8216;PWM_1&#8217;</li>
<li>&#8216;PWM_2&#8217;</li>
<li>&#8216;PWM_3&#8217;(SDI12_1端子)</li>
<li>&#8216;PWM_4&#8217;(SDI12_2端子)</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>count</td>
<td>脉冲计数初始值。从此值开始向上递加。</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">复用通道，一旦已经存在正在使用的功能，则 当前操作无效。 用户需要注意分配端子功能。</p>
</div>
</div>
<div class="section" id="pwm-stop">
<h3><em>pwm_stop</em><a class="headerlink" href="#pwm-stop" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>停止脉冲计数。请勿停止未启动计数的通道。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pwm_stop (pwm_channel)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pwm_channel</td>
<td><p class="first">脉冲计数端子通道。范围：</p>
<blockquote class="last">
<div><ul class="simple">
<li>&#8216;PWM_1&#8217;</li>
<li>&#8216;PWM_2&#8217;</li>
<li>&#8216;PWM_3&#8217;(SDI12_1端子)</li>
<li>&#8216;PWM_4&#8217;(SDI12_2端子)</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">复用通道，一旦已经存在正在使用的功能，则 当前操作无效。 用户需要注意分配端子功能。</p>
</div>
</div>
<div class="section" id="pwm-status">
<h3><em>pwm_status</em><a class="headerlink" href="#pwm-status" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>查看当前脉冲计数通道的起止状态。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pwm_status (pwm_channel)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pwm_channel</td>
<td><p class="first">脉冲计数端子通道。范围：</p>
<blockquote class="last">
<div><ul class="simple">
<li>&#8216;PWM_1&#8217;</li>
<li>&#8216;PWM_2&#8217;</li>
<li>&#8216;PWM_3&#8217;(SDI12_1端子)</li>
<li>&#8216;PWM_4&#8217;(SDI12_2端子)</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>起止状态。 1 - 已启动； 0 - 未启动</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pwm-set">
<h3><em>pwm_set</em><a class="headerlink" href="#pwm-set" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>重新设置计数。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pwm_set (pwm_channel, count)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pwm_channel</td>
<td><p class="first">脉冲计数端子通道。范围：</p>
<blockquote class="last">
<div><ul class="simple">
<li>&#8216;PWM_1&#8217;</li>
<li>&#8216;PWM_2&#8217;</li>
<li>&#8216;PWM_3&#8217;(SDI12_1端子)</li>
<li>&#8216;PWM_4&#8217;(SDI12_2端子)</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>count</td>
<td>脉冲计数值。从此值开始向上递加。</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pwm-get">
<h3><em>pwm_get</em><a class="headerlink" href="#pwm-get" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取当前的脉冲计数值。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pwm_get (pwm_channel)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pwm_channel</td>
<td><p class="first">脉冲计数端子通道。范围：</p>
<blockquote class="last">
<div><ul class="simple">
<li>&#8216;PWM_1&#8217;</li>
<li>&#8216;PWM_2&#8217;</li>
<li>&#8216;PWM_3&#8217;(SDI12_1端子)</li>
<li>&#8216;PWM_4&#8217;(SDI12_2端子)</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>脉冲计数值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pulse1-count-start">
<h3><em>pulse1_count_start</em><a class="headerlink" href="#pulse1-count-start" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>使用 <code class="docutils literal"><span class="pre">PWM_1</span></code> 端子 获取指定时间内的脉冲总数。主要用于计算脉冲宽度和频率。最高频率 2MHz</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pulse1_count_start (timeout,pwm_callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>timeout</td>
<td>统计时间。达到该时间后，执行回调函数</td>
</tr>
<tr class="row-odd"><td>pwm_callback</td>
<td><p class="first">通过回调函数返回测量结果</p>
<blockquote class="last">
<div>参考 <a class="reference internal" href="#id18">高速脉冲回调函数</a></div></blockquote>
</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pulse2-count-start">
<h3><em>pulse2_count_start</em><a class="headerlink" href="#pulse2-count-start" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>使用 <code class="docutils literal"><span class="pre">PWM_2</span></code> 端子 获取指定时间内的脉冲总数。主要用于计算脉冲宽度和频率。最高频率 2MHz</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pulse2_count_start (timeout,pwm_callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>timeout</td>
<td>统计时间。达到该时间后，执行回调函数</td>
</tr>
<tr class="row-odd"><td>pwm_callback</td>
<td><p class="first">通过回调函数返回测量结果</p>
<blockquote class="last">
<div>参考 <a class="reference internal" href="#id18">高速脉冲回调函数</a></div></blockquote>
</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="id9">
<h2>缓存<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h2>
<div class="section" id="set-global-number">
<h3><em>set_global_number</em><a class="headerlink" href="#set-global-number" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>用于设置double/int型变量缓存。变量缓存于内存，掉电丢失。可以在多次 on_start 执行之间传递数值，比如计算平均值。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">set_global_number(index,value)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>index</td>
<td>索引值。范围：0～511</td>
</tr>
<tr class="row-odd"><td>value</td>
<td>number型 数值</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="get-global-number">
<h3><em>get_global_number</em><a class="headerlink" href="#get-global-number" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>用于从内存缓存中获取临时变量。可以在多次 on_start 执行之间传递数值，比如计算平均值。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">get_global_number(index)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>index</td>
<td>索引值。范围：0～511</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>number型 缓存的数值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="set-global-buffer">
<h3><em>set_global_buffer</em><a class="headerlink" href="#set-global-buffer" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>用于设置table型 <strong>字节变量</strong> 缓存。变量缓存于内存，掉电丢失。最大长度512，table元素范围为0~255。可以在多次 on_start 执行之间传递数值，比如计算平均值。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">set_global_buffer (value)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>value</td>
<td>table型变量</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="get-global-buffer">
<h3><em>get_global_buffer</em><a class="headerlink" href="#get-global-buffer" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>用于获取table型变量缓存，可以在多次 on_start 执行之间传递数值，比如计算平均值。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">get_global_buffer()</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>返回值</td>
<td>table型 缓存的数据</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="id10">
<h2>延时<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h2>
<div class="section" id="delay-call">
<h3><em>delay_call</em><a class="headerlink" href="#delay-call" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>延时执行回调函数</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">delay_call (timeout,delay_callback)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>timeout</td>
<td>延时时间。单位：秒</td>
</tr>
<tr class="row-odd"><td>delay_callback</td>
<td><p class="first">等待超时后，调用回调函数 。</p>
<blockquote class="last">
<div>参考 <a class="reference internal" href="#id17">延时执行的回调函数</a>   每个脚本最多可以使用8次</div></blockquote>
</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="id11">
<h2>数据<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h2>
<p>add_data_item</p>
</div>
<div class="section" id="id12">
<h2>时间<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h2>
<div class="section" id="datetime">
<h3><em>datetime</em><a class="headerlink" href="#datetime" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取当前日期时间字符串</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">datetime ()</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>参数</td>
<td>无</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>当前日期时间字符串，比如&#8221;2017-11-03 16:02:55&#8221;</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="timestamp">
<h3><em>timestamp</em><a class="headerlink" href="#timestamp" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取当前UNIX timestamp</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">timestamp  ()</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>参数</td>
<td>无</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>当前UNIX timestamp，比如 1509696195</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="bcdtime">
<h3><em>bcdtime</em><a class="headerlink" href="#bcdtime" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取当前BCD格式的日期字符数组</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">bcdtime  ()</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>参数</td>
<td>无</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>当前BCD格式的日期字符数组，比如 {0x17,0x11,0x03,0x16,0x02,0x55}</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="id13">
<h2>系统<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h2>
<div class="section" id="relay">
<h3><em>relay</em><a class="headerlink" href="#relay" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>控制继电器吸合开关</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">relay (onoff)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>onoff</td>
<td>1 ：吸合继电器（COM与NO短接）               0 ：断开继电器（COM与NC短接）</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pt-temperature">
<h3><em>pt_temperature</em><a class="headerlink" href="#pt-temperature" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>通过铂电阻的阻值，计算温度值</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">pt_temperature(pt,res)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>参数    pt</td>
<td>铂电阻类型，目前仅支持 &#8220;PT100&#8221;</td>
</tr>
<tr class="row-odd"><td>参数    res</td>
<td>电阻阻值</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>温度值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="sys-power-vol">
<h3><em>sys_power_vol</em><a class="headerlink" href="#sys-power-vol" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>获取系统供电电压</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">sys_power_vol ()</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>参数</td>
<td>无</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>系统供电电压值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="id14">
<h2>回调函数<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">所有回调函数执行完毕后，本次脚本才会结束并保存数据。</p>
</div>
<div class="section" id="id15">
<h3><em>总线型回调函数说明</em><a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">总线型(SDI12/RS422/MODBUS/RS232)采集函数的回调函数 。通信超时或正确接收时，发生回调。</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>格式</td>
<td>function xxx_callback(status,data) ...[函数体] end</td>
</tr>
<tr class="row-odd"><td>参数status</td>
<td><ul class="first last simple">
<li>采集过程的结果状态</li>
<li>0 ： SDI12，MODBUS总线在超时时间之前，正常返回</li>
<li>1 ：对于无时间限制或者数据协议的总线，超时返回1。</li>
<li>其他值：采集过程中错误发生，数据无效</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>参数data</td>
<td>table型数据。采集返回的字节数据</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="figure align-center">
<img alt="../_images/rs422_rs232_send.jpg" src="../_images/rs422_rs232_send.jpg" />
</div>
<div class="figure align-center">
<img alt="../_images/modbus_send.jpg" src="../_images/modbus_send.jpg" />
</div>
</div>
<div class="section" id="id16">
<h3><em>delay_call回调函数说明</em><a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h3>
<blockquote id="id17">
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">延时执行的回调函数  延时时间到达后，进行回调。可以在函数体内继续执行其他操作</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>格式</td>
<td>function delay_func() ...[函数体] end</td>
</tr>
<tr class="row-odd"><td>参数</td>
<td>无</td>
</tr>
<tr class="row-even"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="figure align-center">
<img alt="../_images/delay_call.jpg" src="../_images/delay_call.jpg" />
</div>
</div>
<div class="section" id="pwm-callback">
<h3><em>pwm_callback回调函数说明</em><a class="headerlink" href="#pwm-callback" title="永久链接至标题">¶</a></h3>
<blockquote id="id18">
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">高速脉冲计数的回调函数  延时时间到达后，进行回调。可以在函数体内继续执行其他操作</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>格式</td>
<td>function pwm_callback(timeout, data) ...[函数体] end</td>
</tr>
<tr class="row-odd"><td>参数  timeout</td>
<td>pulsex_count_start  调用时的 timeout值</td>
</tr>
<tr class="row-even"><td>参数  data</td>
<td><p class="first">4个字节的 table型 脉冲值。计算方法为：</p>
<blockquote class="last">
<div>count =  data[0] + data[1]* 2^8 + data[2]* 2^16 + data[3] * 2^24</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>返回值</td>
<td>无</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scripts.html" class="btn btn-neutral float-right" title="工程示例" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="系统一览" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, songwensheng.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>